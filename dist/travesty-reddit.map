{"version":3,"sources":["reddApi.js","index.js"],"names":["search","searchTerm","searchLimit","sortBy","fetch","mode","then","res","json","data","children","map","catch","err","console","log","searchForm","document","getElementById","searchInput","timer","addEventListener","e","value","querySelector","showMessage","showLoading","results","clearInterval","remove","output","forEach","post","image","preview","images","source","url","title","truncateString","selftext","permalink","subreddit","score","innerHTML","preventDefault","msg","className","withTimer","div","createElement","appendChild","createTextNode","searchContainer","insertBefore","setTimeout","current_progress","setInterval","el","style","width","myString","limit","shortened","indexOf","substring"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBD3Fc;AACb/D,SAAOC,UAAP,EAAmBC,WAAnB,EAAgCC,MAAhC,EAAwC;AACtC,WAAOC,MACJ,uEAAsEH,UAAW,SAAQE,MAAO,UAASD,WAAY,EADjH,EAEL;AACEG,YAAM;AADR,KAFK,EAMJC,IANI,CAMCC,OAAOA,IAAIC,IAAJ,EANR,EAOJF,IAPI,CAOCG,QAAQA,KAAKA,IAAL,CAAUC,QAAV,CAAmBC,GAAnB,CAAuBF,QAAQA,KAAKA,IAApC,CAPT,EAQJG,KARI,CAQEC,OAAOC,QAAQC,GAAR,CAAYF,GAAZ,CART,CAAP;AASD;AAXY","file":"travesty-reddit.map","sourcesContent":["export default {\n  search(searchTerm, searchLimit, sortBy) {\n    return fetch(\n      `https://cors-anywhere.herokuapp.com/http://reddit.com/search.json?q=${searchTerm}&sort=${sortBy}&limit=${searchLimit}`,\n      {\n        mode: \"cors\"\n      }\n    )\n      .then(res => res.json())\n      .then(data => data.data.children.map(data => data.data))\n      .catch(err => console.log(err));\n  }\n};\n","import reddit from \"./reddApi\";\n\nconst searchForm = document.getElementById(\"search-form\");\nconst searchInput = document.getElementById(\"search-input\");\n\nlet timer;\n\nsearchForm.addEventListener(\"submit\", e => {\n  const searchTerm = searchInput.value;\n  const sortBy = document.querySelector('input[name=\"sortby\"]:checked').value;\n  const searchLimit = document.getElementById(\"limit\").value;\n  if (searchTerm === \"\") {\n    //show message\n    showMessage(\"Please add a Search term\", \"alert-danger\", true);\n  }\n  showLoading();\n  reddit\n    .search(searchTerm, searchLimit, sortBy)\n    .then(results => {\n      clearInterval(timer);\n      document.querySelector(\".progressBar\").remove();\n      let output = `<div class=\"card-columns\">`;\n      results.forEach(post => {\n        let image = post.preview\n          ? post.preview.images[0].source.url\n          : \"https://cdn.comparitech.com/wp-content/uploads/2017/08/reddit-1.jpg\";\n        output += `\n          <div class=\"card mb-2\">\n          <img class=\"card-img-top\" src=\"${image}\" alt=\"Card image cap\">\n          <div class=\"card-body\">\n            <h5 class=\"card-title\">${post.title}</h5>\n            <p class=\"card-text\">${truncateString(post.selftext, 100)}</p>\n            <a href=\"${post.url}\" target=\"_blank\n            \" class=\"btn btn-primary\">Read More</a>\n            <a href=\"https://reddit.com${post.permalink}\" target=\"_blank\n            \" class=\"btn btn-primary\">Reddit Comments</a>\n            <hr>\n            <span class=\"badge badge-secondary\">Subreddit: ${\n              post.subreddit\n            }</span> \n            <span class=\"badge badge-dark\">Score: ${post.score}</span>\n          </div>\n        </div>\n          \n          `;\n      });\n      output += `</div>`;\n      document.getElementById(\"results\").innerHTML = output;\n    })\n    .catch(err => console.log(err));\n  // Search Logic\n  e.preventDefault();\n});\n\nfunction showMessage(msg, className, withTimer) {\n  const div = document.createElement(\"div\");\n  div.className = `alert ${className}`;\n  div.appendChild(document.createTextNode(msg));\n  const searchContainer = document.getElementById(\"search-container\");\n  const search = document.getElementById(\"search\");\n  searchContainer.insertBefore(div, search);\n  if (withTimer) {\n    setTimeout(() => document.querySelector(\".alert\").remove(), 3000);\n  }\n}\n\nfunction showLoading() {\n  const div = document.createElement(\"div\");\n  div.className = `progressBar`;\n  div.innerHTML = `<div class=\"progress\" style=\"height: 3px;\">\n  <div class=\"progress-bar bg-danger\" role=\"progressbar\" style=\"width: 0%\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n</div>`;\n  let current_progress = 0;\n  timer = setInterval(() => {\n    current_progress += 20;\n    let el = document.querySelector(\".progress-bar\");\n    el.style.width = current_progress + \"%\";\n    el[\"aria - valuenow\"] = `$\"{current_progress}\"`;\n    if (current_progress >= 100) {\n      current_progress = 0;\n    }\n  }, 1000);\n  const searchContainer = document.getElementById(\"search-container\");\n  const search = document.getElementById(\"search\");\n  searchContainer.insertBefore(div, search);\n}\n\nfunction truncateString(myString, limit) {\n  const shortened = myString.indexOf(\" \", limit);\n  if (shortened == -1) return myString;\n  return myString.substring(0, shortened);\n}\n"]}